<!DOCTYPE html>
<html lang="en">
<head>
    <title>xeogl Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

    <link href="css/styles.css" rel="stylesheet"/>

    <script src="../build/xeogl.js"></script>


<body>

<div id="info">
    <h1>creating objects in a <a href="../docs/classes/BigModel.html" target="_parent">BigModel</a> without reusing geometry</h1>
    <ul>
        <li>demonstrates how to create objects in a BigModel that each have their own geometry, ie. do not share the same geometry instance</li>
        <li>internally, BigModel will efficiently render these objects in one draw call by batching their geometries into the same set of VBOs</li>
    </ul>
</div>

<script>

    var bigModel = new xeogl.BigModel();

    var object1 = bigModel.createObject({
        id: "myObject1",
        primitive: "triangles",
        positions: [
            2, 2, 2, -2, 2, 2, -2, -2, 2, 2, -2, 2, 2, 2, 2, 2, -2, 2, 2, -2, -2, 2, 2, -2,
            2, 2, 2, 2, 2, -2, -2, 2, -2, -2, 2, 2, -2, 2, 2, -2, 2, -2, -2, -2, -2, -2, -2, 2,
            -2, -2, -2, 2, -2, -2, 2, -2, 2, -2, -2, 2, 2, -2, -2, -2, -2, -2, -2, 2, -2, 2, 2, -2
        ],
        normals: [
            0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0,
            -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1
        ],
        indices: [
            0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11,
            12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23
        ],
        color: [1, 0, 0],
        matrix: xeogl.math.translationMat4c(-7, 0, 0)
    });

    var object2 = bigModel.createObject({
        id: "myObject2",
        primitive: "triangles",
        positions: [
            2, 2, 2, -2, 2, 2, -2, -2, 2, 2, -2, 2, 2, 2, 2, 2, -2, 2, 2, -2, -2, 2, 2, -2,
            2, 2, 2, 2, 2, -2, -2, 2, -2, -2, 2, 2, -2, 2, 2, -2, 2, -2, -2, -2, -2, -2, -2, 2,
            -2, -2, -2, 2, -2, -2, 2, -2, 2, -2, -2, 2, 2, -2, -2, -2, -2, -2, -2, 2, -2, 2, 2, -2
        ],
        normals: [
            0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0,
            -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1
        ],
        indices: [
            0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11,
            12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23
        ],
        color: [0, 1, 0],
        matrix: xeogl.math.scalingMat4c(.5, 2, .5)
    });

    var object3 = bigModel.createObject({
        id: "myObject3",
        primitive: "triangles",
        positions: [
            2, 2, 2, -2, 2, 2, -2, -2, 2, 2, -2, 2, 2, 2, 2, 2, -2, 2, 2, -2, -2, 2, 2, -2,
            2, 2, 2, 2, 2, -2, -2, 2, -2, -2, 2, 2, -2, 2, 2, -2, 2, -2, -2, -2, -2, -2, -2, 2,
            -2, -2, -2, 2, -2, -2, 2, -2, 2, -2, -2, 2, 2, -2, -2, -2, -2, -2, -2, 2, -2, 2, 2, -2
        ],
        normals: [
            0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0, 0, 1, 0,
            -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, 0, -1, 0, 0, -1, 0, 0, -1, 0, 0, -1
        ],
        indices: [
            0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11,
            12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23
        ],
        color: [0, 0, 1],
        matrix: xeogl.math.translationMat4c(7, 0, 0)
    });

    bigModel.finalize(); // Will now render

    var scene = bigModel.scene;
    var camera = scene.camera;
    var angleRad = 0;

    scene.on("tick", function () {
        camera.orbitYaw(0.2);

        var transMat = xeogl.math.translationMat4c(7, 0, 0);
        var rotMat = xeogl.math.rotationMat4v(angleRad, [0, 1, 0], xeogl.math.identityMat4());
        var matrix = xeogl.math.mulMat4(transMat, rotMat, xeogl.math.identityMat4());

        object3.matrix = matrix;

        angleRad += 0.05;
    });

    camera.zoom(5);

    new xeogl.CameraControl();

</script>
</body>
</html>